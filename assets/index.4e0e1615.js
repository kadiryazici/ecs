var P=Object.defineProperty;var S=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var g=(n,t,e)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,_=(n,t)=>{for(var e in t||(t={}))Q.call(t,e)&&g(n,e,t[e]);if(S)for(var e of S(t))B.call(t,e)&&g(n,e,t[e]);return n};var d=(n,t,e)=>(g(n,typeof t!="symbol"?t+"":t,e),e);const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}};k();const A=(n,t={})=>{const e=Object.preventExtensions(_({},n));for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=t[s]);return e};function H(n){return Object.prototype.toString.call(n).slice(8,-1)==="Object"}class a{constructor(t=()=>({})){d(this,"_defultState",{});d(this,"id",Symbol("ComponentId"));const e=t();H(e)&&(this._defultState=Object.preventExtensions(e))}create(t={}){return Object.preventExtensions({id:Symbol("ComponentDescriptorId"),componentId:this.id,state:A(this._defultState,t)})}}function y(n=()=>({})){return new a(n)}const C=Symbol("EntityId");class I{constructor(){d(this,"components",[]);d(this,"id",Symbol("Entity"))}_findIndex(t){return t instanceof a?this.components.findIndex(e=>t.id===e.componentId):this.components.findIndex(e=>t.id===e.id)}add(t){const e=this.components.findIndex(s=>s.componentId===t.componentId);return e>=0?this.components[e]=t:this.components.push(t),this}remove(t){const e=this._findIndex(t);return e>=0&&this.components.splice(e,1),this}find(t){const e=this._findIndex(t);if(e>=0)return this.components[e]}has(t){return this._findIndex(t)>=0}}const R=()=>new I;function F(n,t){return Object.prototype.toString.call(n).slice(8,-1)===t}var p;(function(n){n[n.With=0]="With",n[n.Without=1]="Without"})(p||(p={}));const N=Symbol("optional");class X{constructor(t,...e){d(this,"_modifiers",[]);d(this,"_withComponents",new Set);d(this,"_withoutComponents",new Set);this._components=t,this._modifiers=e.slice(),e.forEach(s=>{const o=s.type===p.With?this._withComponents:this._withoutComponents;s.components.forEach(i=>{o.add(i)})})}exec(t){const e=[],s=this._components.filter(o=>o instanceof a);for(const o of t.entities)[...this._withoutComponents].some(i=>o.has(i))||![...this._withComponents].every(i=>o.has(i))||!s.every(i=>o.has(i))||e.push(o);return e.map(o=>this._components.map(i=>{var r;if(i===C)return o.id;if(i instanceof a)return o.find(i).state;if(F(i,"Object")&&i.type===N)return(r=o.find(i.value))==null?void 0:r.state}))}}function m(n,...t){return new X(n,...t)}function Y(...n){return{type:p.With,components:n}}class ${constructor(){d(this,"entities",new Set)}add(t){return this.entities.add(t),this}remove(t){if(t instanceof I)return this.entities.delete(t),this;for(const e of this.entities)if(e.id===t){this.entities.delete(e);break}return this}clear(){return this.entities.clear(),this}findEntity(t){return[...this.entities].find(e=>e.id===t)}}const z=()=>new $,c=document.querySelector("canvas"),E=()=>{let n=window.innerWidth,t=window.innerHeight;window.innerWidth/16*9>window.innerHeight?(t=window.innerHeight,n=window.innerHeight*16/9):(n=window.innerWidth,t=window.innerWidth/16*9),c.width=n,c.height=t,c.style.setProperty("width",`${n}px`),c.style.setProperty("height",`${t}px`)};E();document.body.style.margin="0";const w=c.getContext("2d");let O=Date.now(),v=0;const u=y(()=>({x:0,y:0})),b=y(()=>({x:0,y:0})),f=y(()=>({width:0,height:0})),W=y(()=>({value:"#000"})),j=(n=0,t=0,e=250)=>R().add(b.create({y:e})).add(u.create({x:n,y:t})).add(f.create({width:50,height:50})).add(W.create({value:"rgb(152, 93, 115)"})),h=z();h.add(j(50,75));h.add(j(150,125,-250));const K=m([u,b],Y(f)),T=()=>{const n=K.exec(h);for(const[t,e]of n)t.x+=e.x*v,t.y+=e.y*v},V=m([u,f,W]),D=()=>{w.fillStyle="rgb(22, 22, 22)",w.fillRect(0,0,c.width,c.height);const n=V.exec(h);for(const[t,e,s]of n)w.fillStyle=s.value,w.fillRect(t.x,t.y,e.width,e.height)},q=m([u,f,b]),G=()=>{const n=q.exec(h);for(const[t,e,s]of n)s.x>0&&t.x>c.width?t.x=-e.width:s.x<0&&t.x<e.width&&(t.x=c.width+e.width),s.y>0&&t.y>c.height?t.y=-e.height:s.y<0&&t.y<-e.height&&(t.y=c.height+e.height)};c.addEventListener("mousedown",n=>{const t=q.exec(h),{top:e,left:s}=c.getBoundingClientRect(),o=n.clientX-s,i=n.clientY-e;for(const[r,l,x]of t)o>=r.x&&o<=r.x+l.width&&i>=r.y&&i<=r.y+l.height&&(x.y*=-1)});const J=m([u,f,C]);c.addEventListener("dblclick",n=>{const t=J.exec(h),{top:e,left:s}=c.getBoundingClientRect(),o=n.clientX-s,i=n.clientY-e;for(const[r,l,x]of t)o>=r.x&&o<=r.x+l.width&&i>=r.y&&i<=r.y+l.height&&h.remove(x)});window.addEventListener("resize",E);const L=()=>{requestAnimationFrame(L);const n=Date.now();v=(n-O)/1e3,O=n,T(),G(),D()};requestAnimationFrame(L);
